<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta httpEquiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />
    <meta name="theme-color" content="#222b45" media="(prefers-color-scheme: dark)" />

    <link rel="manifest" href="./manifest.json" />
    <title>kalimera-react-native</title>
    <!-- The `react-native-web` recommended style reset: https://necolas.github.io/react-native-web/docs/setup/#root-element -->
    <style id="expo-reset">
      /* These styles make the body full-height */
      html,
      body {
        height: 100%;
      }
      /* These styles disable body scrolling if you are using <ScrollView> */
      body {
        overflow: hidden;
      }
      /* These styles make the root element full-height */
      #root {
        display: flex;
        height: 100%;
        flex: 1;
      }
    </style>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').then(registration => {
                    console.log('Service Worker registered with scope:', registration.scope);

                    if (registration.waiting && registration.active) {
                        // The page has been loaded when there's already a waiting and active SW.
                        // This would happen if skipWaiting() isn't being called, and there are
                        // still old tabs open.
                        console.log(1, 'Please close all tabs to get updates.');
                        alert('Application was updated\nPlease reopen it to get the last version');
                    } else {
                        // updatefound is also fired for the very first install. ¯\_(ツ)_/¯
                        registration.addEventListener('updatefound', () => {
                            registration.installing.addEventListener('statechange', () => {
                                if (event.target.state === 'installed') {
                                    if (registration.active) {
                                        // If there's already an active SW, and skipWaiting() is not
                                        // called in the SW, then the user needs to close all their
                                        // tabs before they'll get updates.
                                        console.log(2, 'Please close all tabs to get updates.');
                                        alert('Application was updated\nPlease reopen it to get the last version');
                                    } else {
                                        // Otherwise, this newly installed SW will soon become the
                                        // active SW. Rather than explicitly wait for that to happen,
                                        // just show the initial "content is cached" message.
                                        console.log(3, 'Content is cached for the first time!');
                                    }
                                }
                            });
                        });
                    }
                }).catch(error => {
                    console.error('Service Worker registration failed:', error);
                });
            });
        }
    </script>
  </head>

  <body>
    <!-- Use static rendering with Expo Router to support running without JavaScript. -->
    <noscript>
      You need to enable JavaScript to run this app.
    </noscript>
    <!-- The root element for your Expo app. -->
    <div id="root"></div>

    <script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
    <noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript>
  <script src="./AppEntry-c2d9ed257508c30554a067e902d738ee.js" defer></script>
</body>
</html>
